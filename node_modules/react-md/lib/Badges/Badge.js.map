{"version":3,"sources":["../../src/js/Badges/Badge.js"],"names":["Badge","props","single","_isSingleChild","state","element","children","count","_normalizeCount","nextProps","badgeContent","max","nextState","setState","n","parseInt","Number","isNaN","toString","className","badgeStyle","badgeClassName","Component","component","primary","secondary","defaultTheme","default","circular","badgeId","invisibleOnZero","useCircular","content","c","only","badge","text","themeText","propTypes","style","object","string","oneOfType","number","node","isRequired","func","bool","defaultProps"],"mappings":"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","file":"Badge.js","sourcesContent":["import React, { PureComponent, Children, cloneElement, isValidElement } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport isRequiredForA11y from 'react-prop-types/lib/isRequiredForA11y';\n\nimport themeColors from '../utils/themeColors';\n\n/**\n * The main use case of the `Badge` component is for notifications. It can\n * however also place any content floating to whatever children are supplied.\n */\nexport default class Badge extends PureComponent {\n  static propTypes = {\n    /**\n     * An optional style to apply to the badge's container.\n     */\n    style: PropTypes.object,\n\n    /**\n     * An optional className to apply to the badge's container.\n     */\n    className: PropTypes.string,\n\n    /**\n     * An optional style to apply to the badge.\n     */\n    badgeStyle: PropTypes.object,\n\n    /**\n     * An optional className to apply to the badge.\n     */\n    badgeClassName: PropTypes.string,\n\n    /**\n     * The id to give the badge's content. This is required to help with the\n     * `aria-describedby` attribute that should be applied to one of the children.\n     *\n     * If there is only one child that is a valid React element, the `aria-describedby`\n     * will automatically be cloned into that child (so make sure your component passes\n     * that prop correctly).\n     *\n     * If there is only one child, but it is a string or number, the badge's container\n     * will be updated to include the `aria-describedby`.\n     *\n     * If there is more than child, you are required to add it to a child yourself.\n     */\n    badgeId: isRequiredForA11y(PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ])),\n\n    /**\n     * The content to display with the badge's content. The size of this\n     * element is determinate of the location of the content. You might have\n     * to update the positioning yourself.\n     */\n    children: PropTypes.node.isRequired,\n\n    /**\n     * The component to render the badge as.\n     */\n    component: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n    ]).isRequired,\n\n    /**\n     * The content to display in the badge. If the content is a number or a number string,\n     * the number will be normalized if `normalizeContent` is enabled.\n     */\n    badgeContent: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n      PropTypes.node,\n    ]).isRequired,\n\n    /**\n     * This will basically update the display value of the content to only be 2 digits. If\n     * a number is greater than 99, 99+ will be displayed instead. This is really just to\n     * keep the count inside the circular bubble.\n     */\n    max: PropTypes.number,\n\n    /**\n     * Boolean if the primary color background should get applied to the badge's content.\n     */\n    primary: PropTypes.bool,\n\n    /**\n     * Boolean if the secondary color background should get applied to the badge's content.\n     */\n    secondary: PropTypes.bool,\n\n    /**\n     * Boolean if the default styles should be applied.\n     */\n    default: PropTypes.bool,\n\n    /**\n     * Boolean if the badge's content should appear in a circular container. If this is\n     * undefined, the content will be in a circular container if the badgeContent is a number.\n     */\n    circular: PropTypes.bool,\n\n    /**\n     * Boolean if the badge's notification should be invisible when the count is 0.\n     */\n    invisibleOnZero: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    max: 99,\n    component: 'div',\n  };\n\n  constructor(props) {\n    super(props);\n\n    const single = this._isSingleChild(props);\n    this.state = {\n      single,\n      element: single && isValidElement(props.children),\n      count: this._normalizeCount(props),\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { badgeContent, max, children } = this.props;\n    let nextState;\n    if (badgeContent !== nextProps.badgeContent || max !== nextProps.max) {\n      nextState = { count: this._normalizeCount(nextProps) };\n    }\n\n    if (children !== nextProps.children) {\n      nextState = nextState || {};\n      nextState.single = this._isSingleChild(nextProps);\n      nextState.element = nextState.single && isValidElement(nextProps.children);\n    }\n\n    if (nextState) {\n      this.setState(nextState);\n    }\n  }\n\n  _isSingleChild({ children }) {\n    return Children.count(children) === 1;\n  }\n\n  _normalizeCount({ badgeContent, max }) {\n    let count;\n    if (max) {\n      const n = parseInt(badgeContent, 10);\n      if (!Number.isNaN(n) && n.toString() === badgeContent.toString()) {\n        count = n > max ? `${max}+` : n;\n      }\n    }\n\n    return count;\n  }\n\n  render() {\n    const { count, single, element } = this.state;\n    const {\n      className,\n      badgeStyle,\n      badgeClassName,\n      badgeContent,\n      component: Component,\n      children,\n      primary,\n      secondary,\n      default: defaultTheme,\n      circular,\n      badgeId,\n      invisibleOnZero,\n      max, // eslint-disable-line no-unused-vars\n      ...props\n    } = this.props;\n\n    const useCircular = typeof circular !== 'undefined' ? circular : typeof count !== 'undefined';\n    let content = children;\n    if (single && element) {\n      const c = Children.only(content);\n      if (!c.props['aria-describedby']) {\n        content = cloneElement(c, { 'aria-describedby': badgeId });\n      }\n    } else if (single && !element && !props['aria-describedby']) {\n      props['aria-describedby'] = badgeId;\n    }\n\n    const badge = (\n      <span\n        id={badgeId}\n        key=\"badge\"\n        role=\"status\"\n        style={badgeStyle}\n        className={cn('md-badge', {\n          'md-badge--circular': useCircular,\n          'md-badge--default': defaultTheme,\n        }, themeColors({\n          primary,\n          secondary,\n          text: useCircular,\n          themeText: !primary && !secondary,\n        }, badgeClassName))}\n      >\n        {count || badgeContent}\n      </span>\n    );\n\n    return (\n      <Component\n        {...props}\n        className={cn('md-badge-container md-inline-block', className)}\n      >\n        {content}\n        {invisibleOnZero && count === 0 ? null : badge}\n      </Component>\n    );\n  }\n}\n"]}