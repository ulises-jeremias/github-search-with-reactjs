{"version":3,"sources":["../../src/js/Helpers/Collapse.js"],"names":["Collapse","props","_setHeight","child","_child","ref","height","paddingTop","paddingBottom","node","cs","window","getComputedStyle","offsetHeight","parseInt","getPropertyValue","Math","max","minHeight","setState","collapsed","state","initialOpen","nextProps","value","config","min","nextValue","children","defaultStyle","motionStyle","style","springConfig","animate","_spring","only","nextStyle","overflow","propTypes","object","bool","isRequired","element","number","defaultProps","precision"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAWqBA,Q;;;AA8CnB,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,sHACXA,KADW;;AAAA,YA6BnBC,UA7BmB,GA6BN,UAACC,KAAD,EAAW;AACtB,YAAI,MAAKC,MAAL,IAAe,OAAO,MAAKA,MAAL,CAAYC,GAAnB,KAA2B,UAA9C,EAA0D;AACxD,gBAAKD,MAAL,CAAYC,GAAZ,CAAgBF,KAAhB;AACD;;AAED,YAAIG,SAAS,CAAb;AACA,YAAIC,aAAa,CAAjB;AACA,YAAIC,gBAAgB,CAApB;AACA,YAAIL,UAAU,IAAd,EAAoB;AAClB,cAAMM,OAAO,2BAAYN,KAAZ,CAAb;AACA,cAAMO,KAAKC,OAAOC,gBAAP,CAAwBH,IAAxB,CAAX;AACAH,mBAASG,KAAKI,YAAd;AACAN,uBAAaO,SAASJ,GAAGK,gBAAH,CAAoB,aAApB,CAAT,EAA6C,EAA7C,CAAb;AACAP,0BAAgBM,SAASJ,GAAGK,gBAAH,CAAoB,gBAApB,CAAT,EAAgD,EAAhD,CAAhB;AACD;;AAEDT,iBAASU,KAAKC,GAAL,CAAS,MAAKhB,KAAL,CAAWiB,SAApB,EAA+BZ,MAA/B,CAAT;;AAEA,cAAKa,QAAL,CAAc,EAAEb,cAAF,EAAUC,sBAAV,EAAsBC,4BAAtB,EAAd;AACD,OAhDkB;;AAGjB,UAAI,CAACP,MAAMmB,SAAX,EAAsB;AACpB,cAAKC,KAAL,GAAa,EAAEC,aAAa,IAAf,EAAb;AACD,OAFD,MAEO;AACL,cAAKD,KAAL,GAAa;AACXf,kBAAQL,MAAMiB,SADH;AAEXX,sBAAY,CAFD;AAGXC,yBAAe;AAHJ,SAAb;AAKD;AAXgB;AAYlB;;;;gDAEyBe,S,EAAW;AACnC,YAAI,KAAKF,KAAL,CAAWC,WAAX,IAA0BC,UAAUH,SAAxC,EAAmD;AACjD,eAAKD,QAAL,CAAc,EAAEG,aAAa,KAAf,EAAd;AACD;AACF;;;8BAEOF,S,EAAWE,W,EAAaE,K,EAAOC,M,EAAiB;AAAA,YAATC,GAAS,uEAAH,CAAG;;AACtD,YAAMC,YAAY,CAACP,SAAD,GAAaJ,KAAKC,GAAL,CAASS,GAAT,EAAcF,KAAd,CAAb,GAAoCE,GAAtD;AACA,YAAIJ,eAAe,CAACF,SAApB,EAA+B;AAC7B,iBAAOO,SAAP;AACD;;AAED,eAAO,yBAAOA,SAAP,EAAkBF,MAAlB,CAAP;AACD;;;+BAuBQ;AAAA;;AAAA,qBACoD,KAAKJ,KADzD;AAAA,YACCf,MADD,UACCA,MADD;AAAA,YACSC,UADT,UACSA,UADT;AAAA,YACqBC,aADrB,UACqBA,aADrB;AAAA,YACoCc,WADpC,UACoCA,WADpC;AAAA,qBAUH,KAAKrB,KAVF;AAAA,YAGL2B,QAHK,UAGLA,QAHK;AAAA,YAILR,SAJK,UAILA,SAJK;AAAA,YAKLS,YALK,UAKLA,YALK;AAAA,YAMEC,WANF,UAMLC,KANK;AAAA,YAOLC,YAPK,UAOLA,YAPK;AAAA,YAQLC,OARK,UAQLA,OARK;AAAA,YASLf,SATK,UASLA,SATK;;;AAYP,YAAI,CAACe,OAAL,EAAc;AACZ,iBAAOb,YAAY,IAAZ,GAAmBQ,QAA1B;AACD;;AAED,eACE;AAAA;AAAA;AACE,gCACKE,WADL;AAEExB,sBAAQ,KAAK4B,OAAL,CAAad,SAAb,EAAwBE,WAAxB,EAAqChB,MAArC,EAA6C0B,YAA7C,EAA2Dd,SAA3D,CAFV;AAGEX,0BAAY,KAAK2B,OAAL,CAAad,SAAb,EAAwBE,WAAxB,EAAqCf,UAArC,EAAiDyB,YAAjD,CAHd;AAIExB,6BAAe,KAAK0B,OAAL,CAAad,SAAb,EAAwBE,WAAxB,EAAqCd,aAArC,EAAoDwB,YAApD;AAJjB,cADF;AAOE,uCACKH,YADL;AAEEvB,4BAFF;AAGEC,oCAHF;AAIEC;AAJF;AAPF;AAcG,2BAAS;AACR,gBAAIY,aAAa,CAACW,MAAMzB,MAAxB,EAAgC;AAC9B,qBAAO,IAAP;AACD;;AAED,gBAAMH,QAAQ,gBAASgC,IAAT,CAAcP,QAAd,CAAd;AACA,mBAAKxB,MAAL,GAAcD,KAAd;AACA,gBAAIiC,YAAYjC,MAAMF,KAAN,CAAY8B,KAA5B;AACA,gBAAKX,cAAc,CAACF,SAAD,IAAca,MAAMzB,MAAN,KAAiBY,SAA7C,CAAD,IAA6Da,MAAMzB,MAAN,KAAiBA,MAAlF,EAA0F;AACxF8B,uCACKjC,MAAMF,KAAN,CAAY8B,KADjB,EAEKA,KAFL;AAGEM,0BAAU;AAHZ;AAKD;AACD,mBAAO,yBAAalC,KAAb,EAAoB;AACzBE,mBAAK,CAACe,SAAD,IAAc,OAAKlB,UADC;AAEzB6B,qBAAOK;AAFkB,aAApB,CAAP;AAID;AAjCH,SADF;AAqCD;;;;;;AArJkBpC,U,CACZsC,S,GAAY;AACjB;;;AAGAP,WAAO,oBAAUQ,MAJA;;AAMjB;;;AAGAV,kBAAc,oBAAUU,MATP;;AAWjB;;;AAGAnB,eAAW,oBAAUoB,IAAV,CAAeC,UAdT;;AAgBjB;;;AAGAb,cAAU,oBAAUc,OAAV,CAAkBD,UAnBX;;AAqBjB;;;AAGAT,kBAAc,oBAAUO,MAAV,CAAiBE,UAxBd;;AA0BjB;;;AAGAR,aAAS,oBAAUO,IA7BF;;AA+BjB;;;AAGAtB,eAAW,oBAAUyB,MAAV,CAAiBF;AAlCX,G;AADAzC,U,CAsCZ4C,Y,GAAe;AACpBX,aAAS,IADW;AAEpBD,kBAAc;AACZa,iBAAW;AADC,KAFM;AAKpB3B,eAAW;AALS,G;oBAtCHlB,Q","file":"Collapse.js","sourcesContent":["import React, { PureComponent, Children, cloneElement } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport { Motion, spring } from 'react-motion';\n\n/**\n * The `Collapse` component is used to animate a single child entering\n * or leaving. This uses the `react-motion` library to animate the height,\n * padding-top, and padding-bottom of an element when the `collapsed` prop\n * changes.\n */\nexport default class Collapse extends PureComponent {\n  static propTypes = {\n    /**\n     * An optional style to merge with the `Motion` style.\n     */\n    style: PropTypes.object,\n\n    /**\n     * An optional default style to merge with the `Motion` default style.\n     */\n    defaultStyle: PropTypes.object,\n\n    /**\n     * Boolean if the children are currently collapsed.\n     */\n    collapsed: PropTypes.bool.isRequired,\n\n    /**\n     * A single child to collapse or expand.\n     */\n    children: PropTypes.element.isRequired,\n\n    /**\n     * The spring config to use for the animation.\n     */\n    springConfig: PropTypes.object.isRequired,\n\n    /**\n     * Boolean if the single child entering or leaving should be animated.\n     */\n    animate: PropTypes.bool,\n\n    /**\n     * The min height to apply for the collapse div.\n     */\n    minHeight: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    animate: true,\n    springConfig: {\n      precision: 0.5,\n    },\n    minHeight: 0,\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (!props.collapsed) {\n      this.state = { initialOpen: true };\n    } else {\n      this.state = {\n        height: props.minHeight,\n        paddingTop: 0,\n        paddingBottom: 0,\n      };\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.initialOpen && nextProps.collapsed) {\n      this.setState({ initialOpen: false });\n    }\n  }\n\n  _spring(collapsed, initialOpen, value, config, min = 0) {\n    const nextValue = !collapsed ? Math.max(min, value) : min;\n    if (initialOpen && !collapsed) {\n      return nextValue;\n    }\n\n    return spring(nextValue, config);\n  }\n\n  _setHeight = (child) => {\n    if (this._child && typeof this._child.ref === 'function') {\n      this._child.ref(child);\n    }\n\n    let height = 0;\n    let paddingTop = 0;\n    let paddingBottom = 0;\n    if (child !== null) {\n      const node = findDOMNode(child);\n      const cs = window.getComputedStyle(node);\n      height = node.offsetHeight;\n      paddingTop = parseInt(cs.getPropertyValue('padding-top'), 10);\n      paddingBottom = parseInt(cs.getPropertyValue('padding-bottom'), 10);\n    }\n\n    height = Math.max(this.props.minHeight, height);\n\n    this.setState({ height, paddingTop, paddingBottom });\n  };\n\n  render() {\n    const { height, paddingTop, paddingBottom, initialOpen } = this.state;\n    const {\n      children,\n      collapsed,\n      defaultStyle,\n      style: motionStyle,\n      springConfig,\n      animate,\n      minHeight,\n    } = this.props;\n\n    if (!animate) {\n      return collapsed ? null : children;\n    }\n\n    return (\n      <Motion\n        style={{\n          ...motionStyle,\n          height: this._spring(collapsed, initialOpen, height, springConfig, minHeight),\n          paddingTop: this._spring(collapsed, initialOpen, paddingTop, springConfig),\n          paddingBottom: this._spring(collapsed, initialOpen, paddingBottom, springConfig),\n        }}\n        defaultStyle={{\n          ...defaultStyle,\n          height,\n          paddingTop,\n          paddingBottom,\n        }}\n      >\n        {style => {\n          if (collapsed && !style.height) {\n            return null;\n          }\n\n          const child = Children.only(children);\n          this._child = child;\n          let nextStyle = child.props.style;\n          if ((collapsed && (!minHeight || style.height !== minHeight)) || style.height !== height) {\n            nextStyle = {\n              ...child.props.style,\n              ...style,\n              overflow: 'hidden',\n            };\n          }\n          return cloneElement(child, {\n            ref: !collapsed && this._setHeight,\n            style: nextStyle,\n          });\n        }}\n      </Motion>\n    );\n  }\n}\n"]}