{"version":3,"sources":["../../src/js/Inks/InkContainer.js"],"names":["InkContainer","state","inks","createInk","pageX","pageY","_createInk","_removeTimeout","setTimeout","_removeInk","props","transitionOverlap","focus","_getKeyboardContainer","_inkContainer","offsetWidth","offsetHeight","x","y","pageOffset","left","top","r","Math","max","ink","size","key","Date","now","slice","push","setState","pop","_container","classList","contains","querySelector","_setContainers","span","parentNode","_initOrRemoveEvents","keyboardDiff","mouseDiff","touchDiff","mouseDisabled","_isListenerDisabled","disabledInteractions","touchDisabled","keyboardDisabled","fn","_handleFocus","_handleKeyDown","getAttribute","window","_handleSubmit","_stopPropagationToFocus","_handleMouseDown","_handleMouseUp","_handleTouchStart","_handleTouchEnd","_maybeDelayClick","waitForInkTransition","_handleRemove","_clicked","click","e","which","keyCode","enter","space","target","addEventListener","_handleBlur","removeEventListener","_skipNextMouse","_mouseLeave","_handleMouseLeave","_aborted","_handleTouchMove","changedTouches","lastInk","length","index","abortedInk","Object","assign","aborted","splice","document","activeElement","type","capture","nextProps","di","ndi","mouseDisabledDiff","_isListenerDisabledDiff","touchDisabledDiff","keyboardDisabledDiff","clearTimeout","interaction","nextDisabledInteractions","i","indexOf","ni","style","className","inkStyle","inkClassName","transitionEnterTimeout","transitionLeaveTimeout","pulse","map","propTypes","object","string","bool","arrayOf","oneOf","number","isRequired","defaultProps"],"mappings":"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","file":"InkContainer.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\nimport cn from 'classnames';\n\nimport { ENTER, SPACE } from '../constants/keyCodes';\nimport isFormPartRole from '../utils/isFormPartRole';\nimport calcPageOffset from '../utils/Positioning/calcPageOffset';\nimport isValidClick from '../utils/EventUtils/isValidClick';\nimport { setTouchEvent, addTouchEvent, removeTouchEvent } from '../utils/EventUtils/touches';\nimport captureNextEvent from '../utils/EventUtils/captureNextEvent';\nimport calculateHypotenuse from '../utils/NumberUtils/calculateHypotenuse';\n\nimport Ink from './Ink';\n\n\n/**\n * The `InkContainer` is used for holding the list of inks that get created by touch,\n * click, or keyboard focus.\n *\n * If the container element has the `type=\"submit\"` attribute, the ink will also be\n * triggered when the user presses enter anywhere in the form.\n */\nexport default class InkContainer extends PureComponent {\n  static propTypes = {\n    style: PropTypes.object,\n    className: PropTypes.string,\n    inkStyle: PropTypes.object,\n    inkClassName: PropTypes.string,\n    waitForInkTransition: PropTypes.bool,\n    disabledInteractions: PropTypes.arrayOf(PropTypes.oneOf(['keyboard', 'mouse', 'touch'])),\n    transitionOverlap: PropTypes.number.isRequired,\n    transitionEnterTimeout: PropTypes.number.isRequired,\n    transitionLeaveTimeout: PropTypes.number.isRequired,\n    pulse: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    transitionOverlap: 150,\n    transitionEnterTimeout: 450,\n    transitionLeaveTimeout: 300,\n  };\n\n  state = { inks: [] };\n\n  componentWillReceiveProps(nextProps) {\n    const { disabledInteractions: di } = this.props;\n    const { disabledInteractions: ndi } = nextProps;\n    if (di === ndi || !this._container) {\n      return;\n    }\n\n    const mouseDisabledDiff = this._isListenerDisabledDiff('mouse', di, ndi);\n    const touchDisabledDiff = this._isListenerDisabledDiff('touch', di, ndi);\n    const keyboardDisabledDiff = this._isListenerDisabledDiff('keyboard', di, ndi);\n    this._initOrRemoveEvents(nextProps, keyboardDisabledDiff, mouseDisabledDiff, touchDisabledDiff);\n  }\n\n  componentWillUnmount() {\n    if (this._removeTimeout) {\n      clearTimeout(this._removeTimeout);\n    }\n\n    if (this._container) {\n      this._initOrRemoveEvents({ disabledInteractions: ['keyboard', 'mouse', 'touch'] });\n      this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    }\n  }\n\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * It will also automatically remove the ink.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n  createInk = (pageX, pageY) => {\n    this._createInk(pageX, pageY);\n    this._removeTimeout = setTimeout(() => {\n      this._removeTimeout = null;\n      this._removeInk();\n    }, this.props.transitionOverlap);\n  };\n\n  /**\n   * Focuses the main element.\n   */\n  focus = () => {\n    this._getKeyboardContainer().focus();\n  };\n\n  _isListenerDisabledDiff(interaction, disabledInteractions, nextDisabledInteractions) {\n    const i = disabledInteractions.indexOf(interaction);\n    const ni = nextDisabledInteractions.indexOf(interaction);\n\n    return (i < 0 && ni >= 0) || (i >= 0 && ni < 0);\n  }\n\n  _isListenerDisabled(interaction, disabledInteractions) {\n    return disabledInteractions && disabledInteractions.indexOf(interaction) !== -1;\n  }\n\n  /**\n   * Creates an ink from pageX and pageY coordinates. These values should either come\n   * from the `changedTouches` or just the base event (if clicked). These coordinates\n   * are used to position the ink correctly in the container from touch/click point.\n   * If either value is undefined, an ink will be created from the center of the\n   * container.\n   *\n   * @param {number} pageX - The page x coordinate of the click or touch event.\n   * @param {number} pageY - The page y coordinate of the click or touch event.\n   */\n  _createInk = (pageX, pageY) => {\n    const { offsetWidth, offsetHeight } = this._inkContainer;\n\n    let x;\n    let y;\n    if (typeof pageX !== 'undefined' && typeof pageY !== 'undefined') {\n      const pageOffset = calcPageOffset(this._inkContainer);\n\n      x = pageX - pageOffset.left;\n      y = pageY - pageOffset.top;\n    } else {\n      x = offsetWidth / 2;\n      y = offsetHeight / 2;\n    }\n\n    const r = Math.max(\n      calculateHypotenuse(x, y),\n      calculateHypotenuse(offsetWidth - x, y),\n      calculateHypotenuse(offsetWidth - x, offsetHeight - y),\n      calculateHypotenuse(x, offsetHeight - y)\n    );\n\n    const ink = {\n      left: x - r,\n      top: y - r,\n      size: r * 2,\n      key: Date.now(),\n    };\n\n    const inks = this.state.inks.slice();\n    inks.push(ink);\n    this.setState({ inks });\n  };\n\n  /**\n   * Removes an ink from the container.\n   */\n  _removeInk = () => {\n    const inks = this.state.inks.slice();\n    inks.pop();\n\n    this.setState({ inks });\n  };\n\n  /**\n   * Gets the container for any keyboard events. This will almost always be the main element,\n   * but text fields will need to be the input itself.\n   */\n  _getKeyboardContainer = () => {\n    if (this._container.classList.contains('md-text-field-container')) {\n      return this._container.querySelector('.md-text-field');\n    }\n\n    return this._container;\n  };\n\n  /**\n   * Sets the ink container and the main container from the ref callback. When the component\n   * is mounting, the keyboard, mouse, and keyboard events will be initialized.\n   */\n  _setContainers = (span) => {\n    if (span !== null) {\n      this._inkContainer = span.parentNode;\n      this._container = this._inkContainer.parentNode;\n\n      if (this._container) {\n        this._initOrRemoveEvents(this.props);\n      }\n    }\n  };\n\n  /**\n   * This function will either add or remove the event listeners for creating inks.\n   *\n   * @param {Object} props - The current props to use for figuring out if the events should\n   *    be added or removed.\n   * @param {bool=} keyboardDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the keyboard interactions being disabled.\n   * @param {bool=} mouseDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the mouse interactions being disabled.\n   * @param {bool=} touchDiff - Boolean if there was a difference between the current props and either\n   *    the previous or next props for the touch interactions being disabled.\n   */\n  _initOrRemoveEvents = (props, keyboardDiff = true, mouseDiff = true, touchDiff = true) => {\n    const mouseDisabled = this._isListenerDisabled('mouse', props.disabledInteractions);\n    const touchDisabled = this._isListenerDisabled('touch', props.disabledInteractions);\n    const keyboardDisabled = this._isListenerDisabled('keyboard', props.disabledInteractions);\n\n    if (keyboardDiff) {\n      const fn = `${keyboardDisabled ? 'remove' : 'add'}EventListener`;\n      this._getKeyboardContainer()[fn]('focus', this._handleFocus);\n      this._getKeyboardContainer()[fn]('keydown', this._handleKeyDown);\n\n      if (this._container.getAttribute('type') === 'submit') {\n        window[fn]('submit', this._handleSubmit);\n      }\n\n      if (mouseDiff) {\n        this._container[`${!mouseDisabled ? 'add' : 'remove'}EventListener`]('mousedown', this._stopPropagationToFocus);\n      }\n\n      if (touchDiff) {\n        setTouchEvent(!touchDisabled, this._container, 'start', this._stopPropagationToFocus);\n      }\n    }\n\n    if (mouseDiff) {\n      const fn = `${mouseDisabled ? 'remove' : 'add'}EventListener`;\n      this._container[fn]('mousedown', this._handleMouseDown);\n      this._container[fn]('mouseup', this._handleMouseUp);\n    }\n\n    if (touchDiff) {\n      setTouchEvent(!touchDisabled, this._container, 'start', this._handleTouchStart);\n      setTouchEvent(!touchDisabled, this._container, 'end', this._handleTouchEnd);\n    }\n  };\n\n  _maybeDelayClick = () => {\n    if (!this.props.waitForInkTransition) {\n      return;\n    }\n\n    captureNextEvent('click', this._container);\n  };\n\n  _handleRemove = () => {\n    if (this._clicked && this.props.waitForInkTransition) {\n      // For some reason if the click event will make the ink unmount, it will no longer\n      // have a debug id in the TransitionGroup and it displays a warning. Adding a 1ms timeout\n      // fixes that issue... It only happens on an actual click instead of an enter click.\n      setTimeout(() => {\n        this._container.click();\n      }, 1);\n    }\n\n    this._clicked = false;\n  };\n\n  _handleKeyDown = (e) => {\n    const key = e.which || e.keyCode;\n    const enter = key === ENTER;\n    const space = key === SPACE;\n    // Don't trigger ink when enter key is pressed and the target has an input inside of it (SelectField)\n    if (space || (enter && !isFormPartRole(e.target) && !e.target.querySelector('input'))) {\n      this._clicked = true;\n      this.createInk();\n      this._maybeDelayClick();\n    }\n  };\n\n  _handleFocus = () => {\n    if (this._clicked) {\n      return;\n    }\n\n    this._createInk();\n    this._getKeyboardContainer().addEventListener('blur', this._handleBlur);\n  };\n\n  _handleBlur = () => {\n    this._getKeyboardContainer().removeEventListener('blur', this._handleBlur);\n    this._removeInk();\n  };\n\n  _handleMouseDown = (e) => {\n    this._clicked = true;\n    if (!isValidClick(e) || this._skipNextMouse) {\n      this._skipNextMouse = false;\n      return;\n    }\n\n    this._mouseLeave = false;\n    this._container.addEventListener('mouseleave', this._handleMouseLeave);\n    this._createInk(e.pageX, e.pageY);\n  };\n\n  _handleMouseLeave = () => {\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\n    this._mouseLeave = true;\n    this._removeInk();\n  };\n\n  _handleMouseUp = () => {\n    if (this._mouseLeave) {\n      return;\n    }\n\n    this._maybeDelayClick();\n    this._container.removeEventListener('mouseleave', this._handleMouseLeave);\n    this._removeInk();\n  };\n\n  _handleTouchStart = (e) => {\n    this._aborted = false;\n    this._clicked = true;\n    this._skipNextMouse = true;\n    addTouchEvent(window, 'move', this._handleTouchMove);\n\n    const { pageX, pageY } = e.changedTouches[0];\n    this._createInk(pageX, pageY);\n  };\n\n  _handleTouchMove = () => {\n    removeTouchEvent(window, 'move', this._handleTouchMove);\n    const lastInk = this.state.inks[this.state.inks.length - 1];\n    if (!lastInk || Date.now() > (lastInk.key + 200)) {\n      this._aborted = false;\n      return;\n    }\n\n    const inks = this.state.inks.slice();\n    const index = inks.length - 1;\n\n    const abortedInk = Object.assign({}, lastInk, { aborted: true });\n    inks.splice(index, 1, abortedInk);\n\n    this._aborted = true;\n    this.setState({ inks }, this._removeInk);\n  };\n\n  _handleTouchEnd = () => {\n    this._skipNextMouse = true;\n\n    if (this._aborted) {\n      return;\n    } else {\n      removeTouchEvent(window, 'move', this._handleTouchMove);\n    }\n\n    this._removeInk();\n  };\n\n  /**\n   * If a form was submitted that contains the container of the ink and the current focus element\n   * is not the container, trigger an ink effect.\n   *\n   * The current focus check is added so that two inks are not created.\n   */\n  _handleSubmit = (e) => {\n    if (document.activeElement === this._container || !e.target.contains(this._container)) {\n      return;\n    }\n\n    this._maybeDelayClick();\n    this.createInk();\n  };\n\n  _stopPropagationToFocus = (e) => {\n    switch (e.type) {\n      case 'touchstart':\n        addTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\n        break;\n      case 'touchend':\n        removeTouchEvent(window, 'end', this._stopPropagationToFocus, { capture: true });\n        break;\n      case 'mousedown':\n        window.addEventListener('mouseup', this._stopPropagationToFocus, true);\n        break;\n      case 'mouseup':\n        window.removeEventListener('mouseup', this._stopPropagationToFocus, true);\n        break;\n      default:\n    }\n  };\n\n  render() {\n    const {\n      style,\n      className,\n      inkStyle,\n      inkClassName,\n      transitionOverlap,\n      transitionEnterTimeout,\n      transitionLeaveTimeout,\n      pulse,\n    } = this.props;\n    const inks = this.state.inks.map(props => (\n      <Ink\n        {...props}\n        pulse={pulse}\n        style={inkStyle}\n        className={inkClassName}\n        onRemove={this._handleRemove}\n        transitionOverlap={transitionOverlap}\n        transitionEnterTimeout={transitionEnterTimeout}\n        transitionLeaveTimeout={transitionLeaveTimeout}\n      />\n    ));\n\n    return (\n      <TransitionGroup\n        component=\"div\"\n        style={style}\n        className={cn('md-ink-container', className)}\n      >\n        <span ref={this._setContainers} aria-hidden />\n        {inks}\n      </TransitionGroup>\n    );\n  }\n}\n"]}