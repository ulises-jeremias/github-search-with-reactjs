{"version":3,"sources":["../../src/js/Pickers/YearPicker.js"],"names":["YearPicker","props","state","_getYearRange","nextProps","yearsDisplayed","setState","_getFullYear","minDate","maxDate","calendarTempDate","year","getFullYear","range","parseInt","startYear","endYear","container","offsetHeight","offsetWidth","querySelector","top","offsetTop","height","scrollTop","currentYear","years","push","onCalendarYearClick","className","_setContainer","propTypes","string","instanceOf","Date","isRequired","func","number"],"mappings":"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","file":"YearPicker.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport Year from './Year';\n\n/**\n * The `YearPicker` component is the Year view in a `DatePicker`. This\n * will display a list of years to select from within the given range.\n */\nexport default class YearPicker extends PureComponent {\n  static propTypes = {\n    className: PropTypes.string,\n    calendarTempDate: PropTypes.instanceOf(Date).isRequired,\n    onCalendarYearClick: PropTypes.func.isRequired,\n    yearsDisplayed: PropTypes.number.isRequired,\n    minDate: PropTypes.instanceOf(Date),\n    maxDate: PropTypes.instanceOf(Date),\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = this._getYearRange(props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.yearsDisplayed !== nextProps.yearsDisplayed) {\n      this.setState(this._getFullYear(nextProps));\n    }\n  }\n\n  /**\n   * Gets the current start and end years for the year picker.\n   *\n   * @param {Object} props - The current props to extract the year range from.\n   * @return {Object} an object containign the start and end years\n   */\n  _getYearRange({ minDate, maxDate, yearsDisplayed, calendarTempDate }) {\n    const year = calendarTempDate.getFullYear();\n    const range = !minDate && !maxDate\n      ? parseInt(yearsDisplayed / 2, 10)\n      : yearsDisplayed;\n\n    let startYear;\n    let endYear;\n    if (minDate && maxDate) {\n      startYear = minDate.getFullYear();\n      endYear = maxDate.getFullYear();\n    } else if (!minDate && !maxDate) {\n      startYear = year - range;\n      endYear = year + range;\n      if (yearsDisplayed % 2 === 0) {\n        endYear -= 1;\n      }\n    } else if (!maxDate) {\n      startYear = minDate.getFullYear();\n      endYear = startYear + yearsDisplayed - 1;\n    } else {\n      endYear = maxDate.getFullYear();\n      startYear = endYear - yearsDisplayed + 1;\n    }\n\n    return { startYear, endYear };\n  }\n\n  _setContainer(container) {\n    if (container === null) {\n      return;\n    }\n\n    const { offsetHeight, offsetWidth } = container;\n    const { offsetTop: top, offsetHeight: height } = container.querySelector('.md-year--active');\n\n    // Portrait seems to be 3/4 of the way while landscape is about 1/2\n    if (offsetHeight > offsetWidth) {\n      container.scrollTop = top - (offsetHeight * 3 / 4);\n    } else {\n      container.scrollTop = top - (offsetHeight / 2) + (height / 2);\n    }\n  }\n\n  render() {\n    const { startYear, endYear } = this.state;\n\n    const currentYear = this.props.calendarTempDate.getFullYear();\n    const years = [];\n    for (let year = startYear; year <= endYear; year++) {\n      years.push(\n        <Year\n          key={year}\n          year={year}\n          active={year === currentYear}\n          onClick={this.props.onCalendarYearClick}\n        />\n      );\n    }\n\n    return (\n      <section\n        className={cn('md-picker-content md-picker-content--year', this.props.className)}\n        ref={this._setContainer}\n      >\n        <ol className=\"md-years\">\n          {years}\n        </ol>\n      </section>\n    );\n  }\n}\n"]}