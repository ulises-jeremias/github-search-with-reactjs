{"version":3,"sources":["../../src/js/TextFields/TextArea.js"],"names":["TextArea","state","height","getField","_field","getValue","value","focus","blur","_calcRowHeight","props","rows","style","rowHeight","offsetHeight","_setMask","mask","_mask","_setField","field","_handleResize","_rowHeight","_syncHeightWithMask","undefined","scrollHeight","maxRows","Math","min","max","setState","_handleChange","e","target","onChange","nextProps","defaultValue","className","label","block","Object","assign","propTypes","id","string","object","number","isRequired","func","floatingLabel","bool","node"],"mappings":"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","file":"TextArea.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport ResizeObserver from '../Helpers/ResizeObserver';\n\n/**\n * The `TextArea` component is used to allow a dynamic height for the\n * `textarea`. The height will keep on changing until the maxRows prop\n * is met or infinitely if it does not exist, or is 0.\n */\nexport default class TextArea extends PureComponent {\n  static propTypes = {\n    id: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    rows: PropTypes.number.isRequired,\n    maxRows: PropTypes.number,\n    onChange: PropTypes.func,\n    defaultValue: PropTypes.string,\n    floatingLabel: PropTypes.bool,\n    value: PropTypes.string,\n    block: PropTypes.bool,\n    label: PropTypes.node,\n  };\n\n  state = { height: null };\n\n  componentDidMount() {\n    this._rowHeight = this._calcRowHeight();\n    this._syncHeightWithMask();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.rows !== nextProps.rows) {\n      this._rowHeight = this._calcRowHeight(nextProps);\n    }\n\n    if (this.props.value !== nextProps.value || this.props.maxRows !== nextProps.maxRows) {\n      this._syncHeightWithMask(nextProps.value);\n    }\n  }\n\n  getField = () => this._field;\n\n  getValue = () => this._field.value;\n\n  focus = () => {\n    this._field.focus();\n  };\n\n  blur = () => {\n    this._field.blur();\n  };\n\n  _calcRowHeight = ({ rows } = this.props) => {\n    if (!this._field) {\n      return 19;\n    }\n\n    const height = this._field.style.height;\n    this._field.style.height = 'auto';\n    const rowHeight = this._field.offsetHeight / rows;\n    this._field.style.height = height;\n    return rowHeight;\n  };\n\n  _setMask = (mask) => {\n    this._mask = mask;\n  };\n\n  _setField = (field) => {\n    this._field = field;\n  };\n\n  _handleResize = () => {\n    this._rowHeight = this._calcRowHeight();\n    this._syncHeightWithMask();\n  };\n\n  _syncHeightWithMask = (value) => {\n    // The mask is always null in snapshot teseting\n    if (!this._mask) {\n      return;\n    }\n\n    if (value !== undefined) {\n      this._mask.value = value;\n    }\n\n    let height = this._mask.scrollHeight;\n    if (height === undefined) {\n      return;\n    }\n\n    const { rows, maxRows } = this.props;\n    if (maxRows && maxRows > 0) {\n      height = Math.min(height, this._rowHeight * maxRows);\n    }\n\n    height = Math.max(this._rowHeight * rows, height);\n    this.setState({ height });\n  };\n\n  _handleChange = (e) => {\n    this._syncHeightWithMask(e.target.value, e);\n\n    if (this.props.onChange) {\n      this.props.onChange(e);\n    }\n  };\n\n  render() {\n    const { height } = this.state;\n\n    const {\n      style,\n      defaultValue,\n      value,\n      className,\n      label,\n      block,\n      /* eslint-disable no-unused-vars */\n      maxRows,\n      onChange,\n      /* eslint-enable no-unused-vars */\n      ...props\n    } = this.props;\n\n    return (\n      <div\n        style={{ height: height && height + 5 }}\n        className={cn('md-text-field-multiline-container', {\n          'md-text-field--margin': !label && !block,\n          'md-text-field--floating-margin': label && !block,\n        })}\n      >\n        <ResizeObserver watchWidth onResize={this._handleResize} />\n        <textarea\n          ref={this._setMask}\n          className={cn(className, 'md-text-field--multiline-mask')}\n          readOnly\n          rows={props.rows}\n          tabIndex={-1}\n          style={style}\n          defaultValue={defaultValue}\n          aria-hidden\n          value={value}\n        />\n        <textarea\n          {...props}\n          ref={this._setField}\n          style={Object.assign({}, style, { height })}\n          className={className}\n          defaultValue={defaultValue}\n          value={value}\n          onChange={this._handleChange}\n        />\n      </div>\n    );\n  }\n}\n"]}